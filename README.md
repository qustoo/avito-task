# Состав проекта

Кодовая база находится в папке '/src'

- Тестовое задание выполнено на языке Python при помощи фреймворка FastAPI.
- База данных - PostgreSQL
- ORM - SQlAlchemy
- Линтеры - flake8, isort,black
- Порт для доступа к апишке - 8080
- Сборка и развертывание через docker

## Приложение

- При запуске приложения ***заново*** создаются модели в базе данных на случай обновления моделей
- Создание моделей выполняется в файле ```main.py``` событийном цикле работы fastapi приложения

```@asynccontextmanager
    async def lifespan(app: FastAPI):
        async with database_helper.engine.begin() as conn:
            await conn.run_sync(Base.metadata.create_all)
        yield
        await database_helper.dispose()
```

## База данных

- ***Базу данных разворачиваем в докере***
- ***В файле указаны креды для подключения к базе***
- ***Приложение из окружения берет строку из кредов для подключения к базе***

## Сборка проекта

Сборка выполняется при docker-compose.yml и Makefile'а

+ ***Поднять приложение***```make up```
+ ***Остановить приложение***```make up```
+ ***Собрать образ***```make build```
+ ***Посмотреть логи***```make logs```
+ ***Прогнать все линтеры***```make linters```
+ ***При запуске локально необходимо указать в .env креды для доступа к базе данных, при сборке Dockerfile'a эти даннные подтянутся в контейнер***


## Запуск локально
+ Для запуска локально переименуйте файл ```.env.example``` в ```.env```
+ Добавьте данные для доступа к базе данных
+ Запустите контейнер при помощи ```make locally-run```



